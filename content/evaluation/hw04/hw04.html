---
title: "STAT 545A Assignment 04: Tidy data and joins"
---



<p><strong>Due October 8, 2019 at 23:59</strong></p>
<div id="objective" class="section level2">
<h2>Objective</h2>
<p>You have learned alot about data wrangling! You know how to use the tidyverse to:</p>
<ul>
<li>Filter rows and select variables in a principled or name-based manner</li>
<li>Modify variables and create new variables</li>
<li>Group rows of a data frame and do summarizing or mutating computations within group</li>
<li>Reshape a data frame</li>
<li>Get new information into a data frame via a joining</li>
</ul>
<p>The goal of this homework is to solidify your data wrangling skills by working some realistic problems in the grey area between data aggregation and data reshaping.</p>
<p>If you internalize that there are multiple solutions to most problems, you will spend less time banging your head against the wall in data analysis. If something’s really hard, sneak up on it from a different angle.</p>
</div>
<div id="tidy-submission-10" class="section level2">
<h2>Tidy Submission (10%)</h2>
<div id="mechanics-5" class="section level3">
<h3>Mechanics (5%)</h3>
<p>Follow the instructions for making a tidy submission, found on the <a href="https://stat545.stat.ubc.ca/evaluation/assignments">assignments home page</a>.</p>
<p><strong>NEW</strong>: Like in Assignment 03, you are also expected to link to any html files that you produce, as a webpage. But, this time, this is only <strong>if</strong> you produce an HTML file in your homework.</p>
<p>If there’s any further uncertainty in determining a grade for this “mechanics” portion, the <a href="https://github.com/UBC-MDS/public/blob/master/rubric/rubric_mech.md">UBC MDS mechanics rubric</a> will be referred to.</p>
</div>
<div id="writing-5" class="section level3">
<h3>Writing (5%)</h3>
<ul>
<li>You must use proper English, spelling, and grammar.</li>
<li>You should write concisely.</li>
<li>If there’s any further uncertainty in determining a grade here, the <a href="https://github.com/UBC-MDS/public/blob/master/rubric/rubric_writing.md">UBC MDS writing rubric</a> will be used.</li>
</ul>
</div>
</div>
<div id="exercise-1-univariate-data-reshaping-30" class="section level2">
<h2>Exercise 1: Univariate Data Reshaping (30%)</h2>
<p>Choose <strong>*EITHER*</strong> “Univariate Option 1” or “Univariate Option 2”. Both of these problems have three components:</p>
<ol style="list-style-type: decimal">
<li>Putting data in wider format;
<ul>
<li>5%: Did you produce the <a href="https://github.com/UBC-MDS/public/blob/master/rubric/rubric_accuracy.md">correct result</a>?</li>
<li>5%: Code <a href="https://github.com/UBC-MDS/public/blob/master/rubric/rubric_quality.md">quality</a></li>
</ul></li>
<li>Producing a plot of the wide data; (10%)
<ul>
<li>5%: Did you produce a sensible <a href="https://github.com/UBC-MDS/public/blob/master/rubric/rubric_viz.md">visualization</a>?</li>
<li>5%: Code <a href="https://github.com/UBC-MDS/public/blob/master/rubric/rubric_quality.md">quality</a></li>
</ul></li>
<li>Re-lengthening the wider data. (10%)
<ul>
<li>5%: Did you produce the <a href="https://github.com/UBC-MDS/public/blob/master/rubric/rubric_accuracy.md">correct result</a>?</li>
<li>5%: Code <a href="https://github.com/UBC-MDS/public/blob/master/rubric/rubric_quality.md">quality</a></li>
</ul></li>
</ol>
<p>You are expected to use <code>pivot_wider()</code> and <code>pivot_longer()</code> for reshaping, and <code>ggplot2</code> for the plot.</p>
<p>Regarding the plot:</p>
<ul>
<li>Don’t worry about plotting <em>all</em> of the data from the wide tibble.</li>
<li>The plot should be something that someone might actually want to produce in an analysis.</li>
</ul>
<div id="univariate-option-1" class="section level3">
<h3>Univariate Option 1</h3>
<ol style="list-style-type: decimal">
<li>Make a tibble with one row per year, and columns for life expectancy for two or more countries.</li>
<li>Take advantage of this new data shape to scatterplot life expectancy for one country against that of another.</li>
<li>Re-lengthen the data.</li>
</ol>
</div>
<div id="univariate-option-2" class="section level3">
<h3>Univariate Option 2</h3>
<ol style="list-style-type: decimal">
<li>Compute some measure of life expectancy (mean? median? min? max?) for all possible combinations of continent and year. Reshape that to have one row per year and one variable for each continent. Or the other way around: one row per continent and one variable per year.</li>
<li>Is there a plot that is easier to make with the data in this shape versis the usual form? Try making such a plot!</li>
<li>Re-lengthen the data.</li>
</ol>
</div>
</div>
<div id="exercise-2-multivariate-data-reshaping-30" class="section level2">
<h2>Exercise 2: Multivariate Data Reshaping (30%)</h2>
<p>Choose <strong>*EITHER*</strong> “Multivariate Option 1” or “Multivariate Option 2”. All of these problems have two components:</p>
<ol style="list-style-type: decimal">
<li>Putting data in wider format;
<ul>
<li>5%: Did you produce the <a href="https://github.com/UBC-MDS/public/blob/master/rubric/rubric_accuracy.md">correct result</a>?</li>
<li>10%: Code <a href="https://github.com/UBC-MDS/public/blob/master/rubric/rubric_quality.md">quality</a></li>
</ul></li>
<li>Re-lengthening the data.
<ul>
<li>5%: Did you produce the <a href="https://github.com/UBC-MDS/public/blob/master/rubric/rubric_accuracy.md">correct result</a>?</li>
<li>10%: Code <a href="https://github.com/UBC-MDS/public/blob/master/rubric/rubric_quality.md">quality</a></li>
</ul></li>
</ol>
<p>Don’t worry about producing a plot here. You are expected to use <code>pivot_wider()</code> and <code>pivot_longer()</code> for reshaping.</p>
<div id="multivariate-option-1" class="section level3">
<h3>Multivariate Option 1</h3>
<ol style="list-style-type: decimal">
<li>Make a tibble with one row per year, and columns for life expectancy <strong>and</strong> GDP per capita (or two other numeric variables) for two or more countries.</li>
<li>Re-lengthen the data.</li>
</ol>
</div>
<div id="multivariate-option-2" class="section level3">
<h3>Multivariate Option 2</h3>
<ol style="list-style-type: decimal">
<li>Compute some measure of life expectancy <strong>and</strong> GDP per capita (or two other numeric variables) (mean? median? min? max?) for all possible combinations of continent and year. Reshape that to have one row per year and one variable for each continent-measurement combination. Or the other way around: one row per continent and one variable for each year-measurement combination.</li>
<li>Re-lengthen the data.</li>
</ol>
</div>
</div>
<div id="exercise-3-table-joins-30" class="section level2">
<h2>Exercise 3: Table Joins (30%)</h2>
<p>Do <strong>*ALL*</strong> of the activities in this section.</p>
<p>Read in the made-up wedding guestlist and email addresses using the following lines (go ahead and copy-paste these):</p>
<pre><code>guest &lt;- read_csv(&quot;https://raw.githubusercontent.com/STAT545-UBC/Classroom/master/data/wedding/attend.csv&quot;)
email &lt;- read_csv(&quot;https://raw.githubusercontent.com/STAT545-UBC/Classroom/master/data/wedding/emails.csv&quot;)</code></pre>
<p>Then, complete the following tasks using the tidyverse (<code>tidyr</code>, <code>dplyr</code>, …). No need to do any pivoting – feel free to leave <code>guest</code> in its current format.</p>
<div id="section" class="section level3">
<h3>3.1 (10%)</h3>
<p><strong>Rubric</strong>:</p>
<ul>
<li>5%: Did you produce the <a href="https://github.com/UBC-MDS/public/blob/master/rubric/rubric_accuracy.md">correct result</a>?</li>
<li>5%: Code <a href="https://github.com/UBC-MDS/public/blob/master/rubric/rubric_quality.md">quality</a></li>
</ul>
<p>For each guest in the guestlist (<code>guest</code> tibble), add a column for email address, which can be found in the <code>email</code> tibble.</p>
</div>
<div id="section-1" class="section level3">
<h3>3.2 (10%)</h3>
<p><strong>Rubric</strong>:</p>
<ul>
<li>10%: Code <a href="https://github.com/UBC-MDS/public/blob/master/rubric/rubric_quality.md">quality</a></li>
</ul>
<p>Who do we have emails for, yet are not on the guestlist?</p>
</div>
<div id="section-2" class="section level3">
<h3>3.3 (10%)</h3>
<p><strong>Rubric</strong>:</p>
<ul>
<li>5%: Did you produce the <a href="https://github.com/UBC-MDS/public/blob/master/rubric/rubric_accuracy.md">correct result</a>?</li>
<li>5%: Code <a href="https://github.com/UBC-MDS/public/blob/master/rubric/rubric_quality.md">quality</a></li>
</ul>
<p>Make a guestlist that includes everyone we have emails for (in addition to those on the original guestlist).</p>
</div>
</div>
